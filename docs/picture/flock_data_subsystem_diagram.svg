<svg xmlns="http://www.w3.org/2000/svg" width="1220" height="640" viewBox="0 0 1220 640">
  <style>
    text { font-family: 'Noto Sans TC', 'Microsoft JhengHei', sans-serif; fill: #1b1b1b; }
    .title { font-size: 28px; font-weight: bold; }
    .section { fill: #f2f6ff; stroke: #90a4ae; stroke-dasharray: 10 6; stroke-width: 2; rx: 18; ry: 18; }
    .module { fill: #ffffff; stroke-width: 2.3; rx: 16; ry: 16; }
    .frontend { stroke: #00897b; }
    .backend { stroke: #1e88e5; }
    .data { stroke: #6c5ce7; }
    .label { font-size: 20px; font-weight: 600; }
    .note { font-size: 16px; fill: #546e7a; }
    .arrow { stroke: #37474f; stroke-width: 2.2; fill: none; marker-end: url(#arrowhead); }
    .dashed { stroke-dasharray: 8 6; }
  </style>
  <defs>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#37474f" />
    </marker>
  </defs>
  <rect width="100%" height="100%" fill="#f7f9fc" />
  <text x="610" y="50" text-anchor="middle" class="title">子系統互動圖 - 羊群與資料治理</text>

  <rect class="section" x="60" y="110" width="340" height="460" />
  <text x="230" y="140" text-anchor="middle" class="note">前端 / 營運</text>

  <rect class="section" x="430" y="110" width="360" height="460" />
  <text x="610" y="140" text-anchor="middle" class="note">後端服務</text>

  <rect class="section" x="820" y="110" width="320" height="460" />
  <text x="980" y="140" text-anchor="middle" class="note">資料層</text>

  <rect class="module frontend" x="90" y="200" width="280" height="120" />
  <text text-anchor="middle">
    <tspan x="230" y="245" class="label">SheepListView</tspan>
    <tspan x="230" y="273" class="note">views/SheepListView.vue</tspan>
    <tspan x="230" y="301" class="note">羊群清單 / 篩選</tspan>
  </text>

  <rect class="module frontend" x="90" y="360" width="280" height="120" />
  <text text-anchor="middle">
    <tspan x="230" y="405" class="label">DataManagementView</tspan>
    <tspan x="230" y="433" class="note">views/DataManagementView.vue</tspan>
    <tspan x="230" y="461" class="note">批次匯入 / 清理</tspan>
  </text>

  <rect class="module frontend" x="90" y="520" width="280" height="110" />
  <text text-anchor="middle">
    <tspan x="230" y="560" class="label">Sheep Store</tspan>
    <tspan x="230" y="588" class="note">stores/sheep.js</tspan>
  </text>

  <rect class="module backend" x="460" y="200" width="300" height="120" />
  <text text-anchor="middle">
    <tspan x="610" y="245" class="label">Sheep API</tspan>
    <tspan x="610" y="273" class="note">app/api/sheep.py</tspan>
    <tspan x="610" y="301" class="note">CRUD / 事件紀錄</tspan>
  </text>

  <rect class="module backend" x="460" y="350" width="300" height="130" />
  <text text-anchor="middle">
    <tspan x="610" y="395" class="label">Data Management API</tspan>
    <tspan x="610" y="423" class="note">app/api/data_management.py</tspan>
    <tspan x="610" y="451" class="note">資料匯入 / 驗證</tspan>
  </text>

  <rect class="module backend" x="460" y="510" width="300" height="100" />
  <text text-anchor="middle">
    <tspan x="610" y="555" class="label">SQLAlchemy Models</tspan>
    <tspan x="610" y="583" class="note">app/models.py</tspan>
  </text>

  <rect class="module data" x="850" y="200" width="260" height="120" />
  <text text-anchor="middle">
    <tspan x="980" y="245" class="label">PostgreSQL / SQLite</tspan>
    <tspan x="980" y="273" class="note">農場主資料</tspan>
  </text>

  <rect class="module data" x="850" y="360" width="260" height="120" />
  <text text-anchor="middle">
    <tspan x="980" y="405" class="label">批次匯入緩衝</tspan>
    <tspan x="980" y="433" class="note">instance/app.db · Parquet</tspan>
  </text>

  <rect class="module data" x="850" y="520" width="260" height="100" />
  <text text-anchor="middle">
    <tspan x="980" y="560" class="label">Audit Log</tspan>
    <tspan x="980" y="588" class="note">migrations / Alembic</tspan>
  </text>

  <path class="arrow" d="M230 320 L 230 360" />
  <text x="240" y="340" class="note">批次匯入</text>

  <path class="arrow" d="M230 520 L 230 470" />
  <text x="190" y="500" class="note">快取列表</text>

  <path class="arrow" d="M370 260 L 460 260" />
  <text x="410" y="240" class="note">REST 請求</text>

  <path class="arrow dashed" d="M370 420 L 460 420" />
  <text x="410" y="400" class="note">CSV 上傳</text>

  <path class="arrow" d="M760 260 L 850 260" />
  <text x="800" y="240" class="note">ORM 儲存</text>

  <path class="arrow" d="M760 420 L 850 420" />
  <text x="800" y="400" class="note">暫存驗證</text>

  <path class="arrow dashed" d="M610 510 L 610 470" />
  <text x="630" y="490" class="note">資料驗證</text>

  <path class="arrow" d="M980 320 L 980 360" />
  <text x="990" y="340" class="note">定期備份</text>

  <path class="arrow dashed" d="M980 480 L 980 520" />
  <text x="990" y="500" class="note">異動追蹤</text>
  </svg>